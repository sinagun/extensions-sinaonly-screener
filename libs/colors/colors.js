/******************************************
 * Websanova.com
 *
 * Resources for web entrepreneurs
 *
 * @author          Websanova
 * @copyright       Copyright (c) 2012 Websanova.
 * @license         This wChar jQuery plug-in is dual licensed under the MIT and GPL licenses.
 * @link            http://www.websanova.com
 * @github			http://github.com/websanova/wColorPicker
 * @version         Version 1.3.4
 *
 ******************************************/(function(a){function b(a,b){return this.colorPicker=null,this.settings=a,this.$elem=b,this.currentColor=a.initColor,this.height=null,this.width=null,this.slideTopToBottom=null,this.customTarget=null,this.buttonColor=null,this.paletteHolder=null,this}a.fn.wColorPicker=function(c,d){if("object"==typeof c)d=c;else if("string"==typeof c){var e=[],f=this.each(function(){var b=a(this).data("_wColorPicker");b&&void 0!==a.fn.wColorPicker.defaultSettings[c]&&(void 0===d?e.push(b.settings[c]):b.settings[c]=d)});return 1===e.length?e[0]:0<e.length?e:f}return d=a.extend({},a.fn.wColorPicker.defaultSettings,d||{}),this.each(function(){var c=a(this),e=jQuery.extend(!0,{},d),f=new b(e,c);f.generate(),f.appendToElement(c),f.colorSelect(f,e.initColor),c.data("_wColorPicker",f)})},a.fn.wColorPicker.defaultSettings={theme:"black",opacity:.8,initColor:"#FF0000",onMouseover:null,onMouseout:null,onSelect:null,mode:"flat",buttonSize:20,effect:"slide",showSpeed:500,hideSpeed:500},b.prototype={generate:function(){if(this.colorPicker)return this.colorPicker;var b=this,c={clear:"both",height:0,lineHeight:0,fontSize:0};this.customTarget=a("<div class=\"_wColorPicker_customTarget\"></div>"),this.customInput=a("<input type=\"text\" class=\"_wColorPicker_customInput\" value=\"\"/>").keyup(function(c){var d=c.keyCode?c.keyCode:c.which,e=b.validHex(a(this).val());a(this).val(e),7===e.length&&b.customTarget.css("backgroundColor",e),13===d&&(b.colorSelect(b,a(this).val()),b.buttonColor&&b.hidePalette(b))}).click(function(a){a.stopPropagation()});var d=a("<div class=\"_wColorPicker_custom\"></div>").append(this.appendColors(a("<div class=\"_wColorPicker_noColor\">"),[""],1)).append(this.customTarget).append(this.customInput).append(a("<div></div>").css(c)),e=this.appendColors(a("<div class=\"_wColorPicker_palette_simple\"></div>"),["000000","333333","666666","999999","CCCCCC","FFFFFF","FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF"],1),f=this.appendColors(a("<div class=\"_wColorPicker_palette_mixed\"></div>"),["000000","003300","006600","009900","00CC00","00FF00","330000","333300","336600","339900","33CC00","33FF00","660000","663300","666600","669900","66CC00","66FF00","000033","003333","006633","009933","00CC33","00FF33","330033","333333","336633","339933","33CC33","33FF33","660033","663333","666633","669933","66CC33","66FF33","000066","003366","006666","009966","00CC66","00FF66","330066","333366","336666","339966","33CC66","33FF66","660066","663366","666666","669966","66CC66","66FF66","000099","003399","006699","009999","00CC99","00FF99","330099","333399","336699","339999","33CC99","33FF99","660099","663399","666699","669999","66CC99","66FF99","0000CC","0033CC","0066CC","0099CC","00CCCC","00FFCC","3300CC","3333CC","3366CC","3399CC","33CCCC","33FFCC","6600CC","6633CC","6666CC","6699CC","66CCCC","66FFCC","0000FF","0033FF","0066FF","0099FF","00CCFF","00FFFF","3300FF","3333FF","3366FF","3399FF","33CCFF","33FFFF","6600FF","6633FF","6666FF","6699FF","66CCFF","66FFFF","990000","993300","996600","999900","99CC00","99FF00","CC0000","CC3300","CC6600","CC9900","CCCC00","CCFF00","FF0000","FF3300","FF6600","FF9900","FFCC00","FFFF00","990033","993333","996633","999933","99CC33","99FF33","CC0033","CC3333","CC6633","CC9933","CCCC33","CCFF33","FF0033","FF3333","FF6633","FF9933","FFCC33","FFFF33","990066","993366","996666","999966","99CC66","99FF66","CC0066","CC3366","CC6666","CC9966","CCCC66","CCFF66","FF0066","FF3366","FF6666","FF9966","FFCC66","FFFF66","990099","993399","996699","999999","99CC99","99FF99","CC0099","CC3399","CC6699","CC9999","CCCC99","CCFF99","FF0099","FF3399","FF6699","FF9999","FFCC99","FFFF99","9900CC","9933CC","9966CC","9999CC","99CCCC","99FFCC","CC00CC","CC33CC","CC66CC","CC99CC","CCCCCC","CCFFCC","FF00CC","FF33CC","FF66CC","FF99CC","FFCCCC","FFFFCC","9900FF","9933FF","9966FF","9999FF","99CCFF","99FFFF","CC00FF","CC33FF","CC66FF","CC99FF","CCCCFF","CCFFFF","FF00FF","FF33FF","FF66FF","FF99FF","FFCCFF","FFFFFF"],18),g=a("<div class=\"_wColorPicker_bg\"></div>").css({opacity:this.settings.opacity}),h=a("<div class=\"_wColorPicker_content\"></div>").append(d).append(e).append(f).append(a("<div></div>").css(c));return this.colorPicker=a("<div class=\"_wColorPicker_holder\"></div>").click(function(a){a.stopPropagation()}).append(a("<div class=\"_wColorPicker_outer\"></div>").append(a("<div class=\"_wColorPicker_inner\"></div>").append(g).append(h))).addClass("_wColorPicker_"+this.settings.theme),this.colorPicker},appendColors:function(b,c,d){var e=1,f=this;for(index in c)b.append(a("<div id=\"_wColorPicker_color_"+e+"\" class=\"_wColorPicker_color _wColorPicker_color_"+e+"\"></div>").css("backgroundColor","#"+c[index]).click(function(){f.colorSelect(f,a(this).css("backgroundColor"))}).mouseout(function(){f.colorHoverOff(f,a(this))}).mouseover(function(){f.colorHoverOn(f,a(this))})),e===d&&(b.append(a("<div></div>").css({clear:"both",height:0,fontSize:0,lineHeight:0,marginTop:-1})),e=0),e++;return b},colorSelect:function(a,b){b=a.toHex(b),a.customTarget.css("backgroundColor",b),a.currentColor=b,a.customInput.val(b),a.settings.onSelect&&a.settings.onSelect.apply(this,[b]),a.buttonColor&&(a.buttonColor.css("backgroundColor",b),a.hidePalette(a))},colorHoverOn:function(a,b){b.parent().children("active").removeClass("active"),b.addClass("active").next().addClass("activeLeft"),b.nextAll("."+b.attr("id")+":first").addClass("activeTop");var c=a.toHex(b.css("backgroundColor"));a.customTarget.css("backgroundColor",c),a.customInput.val(c),a.settings.onMouseover&&a.settings.onMouseover.apply(this,[c])},colorHoverOff:function(a,b){b.removeClass("active").next().removeClass("activeLeft"),b.nextAll("."+b.attr("id")+":first").removeClass("activeTop"),a.customTarget.css("backgroundColor",a.currentColor),a.customInput.val(a.currentColor),a.settings.onMouseout&&a.settings.onMouseout.apply(this,[a.currentColor])},appendToElement:function(b){var c=this;if("flat"===c.settings.mode)b.append(c.colorPicker);else{c.paletteHolder=a("<div class=\"_wColorPicker_paletteHolder\"></div>").css({position:"absolute",overflow:"hidden",width:1e3}).append(c.colorPicker),c.buttonColor=a("<div class=\"_wColorPicker_buttonColor\"></div>").css({width:c.settings.buttonSize,height:c.settings.buttonSize});var d=a("<div class=\"_wColorPicker_buttonHolder\"></div>").css({position:"relative"}).append(a("<div class=\"_wColorPicker_buttonBorder\"></div>").append(c.buttonColor)).append(c.paletteHolder);b.append(d),c.width=c.colorPicker.outerWidth(!0),c.height=c.colorPicker.outerHeight(!0),c.paletteHolder.css({width:c.width,height:c.height}).hide(),"fade"===c.settings.effect&&c.paletteHolder.css({opacity:0}),"hover"===c.settings.mode?d.hover(function(a){c.showPalette(a,c)},function(){c.hidePalette(c)}):"click"===c.settings.mode&&(a(document).click(function(){c.paletteHolder.hasClass("active")&&c.hidePalette(c)}),d.click(function(a){a.stopPropagation(),c.paletteHolder.hasClass("active")?c.hidePalette(c):c.showPalette(a,c)})),c.colorSelect(c,c.settings.initColor)}},showPalette:function(b,c){var d=c.paletteHolder.parent().offset(),e=0,f=c.paletteHolder.parent().outerHeight(!0);c.slideTopToBottom=f,d.left-a(window).scrollLeft()+c.width>a(window).width()&&(e=-1*(c.width-c.paletteHolder.parent().outerWidth(!0))),d.top-a(window).scrollTop()+c.height>a(window).height()&&(c.slideTopToBottom=0,f=-1*c.height),c.paletteHolder.css({left:e,top:f}),c.paletteHolder.addClass("active"),"slide"===c.settings.effect?c.paletteHolder.stop(!0,!1).css({height:0,top:0===c.slideTopToBottom?0:f}).show().animate({height:c.height,top:f},c.settings.showSpeed):"fade"===c.settings.effect?c.paletteHolder.stop(!0,!1).show().animate({opacity:1},c.settings.showSpeed):c.paletteHolder.show()},hidePalette:function(a){a.paletteHolder.hasClass("active")&&(a.paletteHolder.removeClass("active"),"slide"===a.settings.effect?a.paletteHolder.stop(!0,!1).animate({height:0,top:0===a.slideTopToBottom?0:a.slideTopToBottom},a.settings.hideSpeed,function(){a.paletteHolder.hide()}):"fade"===a.settings.effect?a.paletteHolder.stop(!0,!1).animate({opacity:0},a.settings.hideSpeed,function(){a.paletteHolder.hide()}):a.paletteHolder.hide())},toHex:function(a){if("rgba"===a.substring(0,4))c="transparent";else if("rgb"===a.substring(0,3)){var b=a.substring(4,a.length-1).replace(/\s/g,"").split(",");for(i in b)b[i]=parseInt(b[i]).toString(16),"0"===b[i]&&(b[i]="00");var c="#"+b.join("").toUpperCase()}else c=a;return c},validHex:function(a){return"#"+a.replace(/[^0-9a-f]/ig,"").substring(0,6).toUpperCase()}}})(jQuery);